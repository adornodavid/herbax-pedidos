<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale: 1.0">
    <title>Sistema de Pedidos HBX - Portal Distribuidores</title>
    <style>
        :root {
            --herbax-primary: #3fae29;
            --herbax-secondary: #c4d82e;
            --herbax-gray: #374E5A;
            --herbax-light: #f8f9fa;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Inter', -apple-system, BlinkMacSystemFont, sans-serif;
            background: #ffffff;
            min-height: 100vh;
            color: #333;
            line-height: 1.6;
        }

        .container {
            max-width: 800px;
            margin: 0 auto;
            padding: 20px;
        }

        /* Header m√°s limpio y minimalista como en v23 */
        .header {
            text-align: center;
            margin-bottom: 30px;
            padding: 40px 20px;
        }

        .header h1 {
            font-size: 3rem;
            color: var(--herbax-primary);
            margin-bottom: 10px;
            cursor: pointer;
            font-weight: 700;
        }

        .header p {
            font-size: 1.2rem;
            color: #666;
            font-weight: 400;
        }

        /* Secci√≥n de ayuda con borde verde lateral como en v23 */
        .help-banner {
            background: #f9f9f9;
            border-left: 4px solid var(--herbax-primary);
            padding: 20px;
            margin-bottom: 40px;
            color: #555;
        }

        .help-banner strong {
            color: var(--herbax-gray);
        }

        /* Barra de progreso m√°s simple y limpia */
        .progress-bar {
            background: #e5e7eb;
            height: 4px;
            border-radius: 2px;
            margin: 30px 0;
            overflow: hidden;
        }

        .progress-fill {
            background: var(--herbax-primary);
            height: 100%;
            transition: width 0.3s ease;
        }

        /* Contenedores de pasos m√°s limpios sin sombras excesivas */
        .step-container {
            background: white;
            border: 1px solid #e5e7eb;
            border-radius: 12px;
            padding: 40px;
            margin-bottom: 30px;
            display: none;
        }

        .step-container.active {
            display: block;
        }

        /* Header de pasos m√°s minimalista */
        .step-header {
            text-align: center;
            margin-bottom: 40px;
            padding-bottom: 20px;
            border-bottom: 1px solid #f0f0f0;
        }

        .step-number {
            background: var(--herbax-primary);
            color: white;
            width: 60px;
            height: 60px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.5rem;
            font-weight: bold;
            margin: 0 auto 20px;
        }

        .step-title {
            font-size: 2rem;
            color: var(--herbax-primary);
            margin-bottom: 15px;
            font-weight: 600;
        }

        .step-description {
            color: #666;
            font-size: 1.1rem;
            max-width: 600px;
            margin: 0 auto;
        }

        /* Grid de pa√≠ses m√°s limpio */
        .country-grid {
            display: grid;
            grid-template-columns: 1fr;
            gap: 20px;
            margin-top: 40px;
            max-width: 500px;
            margin-left: auto;
            margin-right: auto;
        }

        .country-option {
            background: white;
            border: 2px solid #e5e7eb;
            border-radius: 12px;
            padding: 25px;
            text-align: center;
            cursor: pointer;
            transition: all 0.2s ease;
        }

        .country-option:hover {
            border-color: var(--herbax-primary);
            background: #f8fdf8;
        }

        .country-option.selected {
            border-color: var(--herbax-primary);
            background: #f0f9f0;
        }

        .country-flag {
            font-size: 2.5rem;
            margin-bottom: 12px;
        }

        .country-name {
            font-size: 1.3rem;
            font-weight: 600;
            color: var(--herbax-gray);
            margin-bottom: 5px;
        }

        .country-currency {
            color: #666;
            font-size: 0.95rem;
        }

        /* Formularios m√°s limpios */
        .form-group {
            margin-bottom: 25px;
        }

        .form-label {
            display: block;
            margin-bottom: 8px;
            font-weight: 600;
            color: var(--herbax-gray);
            font-size: 0.95rem;
        }

        .form-input {
            width: 100%;
            padding: 12px 16px;
            border: 2px solid #e5e7eb;
            border-radius: 8px;
            font-size: 1rem;
            transition: border-color 0.2s ease;
            background: white;
        }

        .form-input:focus {
            outline: none;
            border-color: var(--herbax-primary);
        }

        /* B√∫squedas m√°s limpias */
        .search-container {
            position: relative;
        }

        .search-results {
            position: absolute;
            top: 100%;
            left: 0;
            right: 0;
            background: white;
            border: 2px solid var(--herbax-primary);
            border-top: none;
            border-radius: 0 0 8px 8px;
            max-height: 200px;
            overflow-y: auto;
            z-index: 1000;
            display: none;
            box-shadow: 0 4px 12px rgba(0,0,0,0.1);
        }

        .search-result {
            padding: 12px 16px;
            cursor: pointer;
            border-bottom: 1px solid #f0f0f0;
        }

        .search-result:hover {
            background: #f8fdf8;
        }

        .help-text {
            font-size: 0.9rem;
            color: #666;
            margin-top: 8px;
            line-height: 1.5;
        }

        /* Botones m√°s limpios y minimalistas */
        .button-group {
            display: flex;
            gap: 15px;
            justify-content: center;
            margin-top: 40px;
        }

        .btn {
            padding: 12px 24px;
            border: none;
            border-radius: 8px;
            font-size: 1rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.2s ease;
            min-width: 140px;
        }

        .btn-primary {
            background: var(--herbax-primary);
            color: white;
        }

        .btn-primary:hover:not(:disabled) {
            background: #2d8a1f;
        }

        .btn-primary:disabled {
            background: #ccc;
            cursor: not-allowed;
        }

        .btn-secondary {
            background: #6c757d;
            color: white;
        }

        .btn-secondary:hover {
            background: #545b62;
        }

        /* Cards de productos m√°s limpias */
        .product-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(280px, 1fr));
            gap: 20px;
            margin-top: 30px;
        }

        .product-card {
            border: 1px solid #e5e7eb;
            border-radius: 8px;
            padding: 20px;
            background: white;
        }

        .product-name {
            font-weight: 600;
            color: var(--herbax-primary);
            margin-bottom: 5px;
            font-size: 1.1rem;
        }

        .product-sku {
            color: #666;
            font-size: 0.9rem;
            margin-bottom: 10px;
        }

        .product-price {
            font-size: 1.1rem;
            font-weight: 600;
            color: var(--herbax-gray);
            margin-bottom: 15px;
        }

        .quantity-controls {
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .quantity-btn {
            width: 32px;
            height: 32px;
            border: 1px solid var(--herbax-primary);
            background: white;
            color: var(--herbax-primary);
            border-radius: 4px;
            cursor: pointer;
            font-weight: bold;
            font-size: 1.1rem;
        }

        .quantity-btn:hover {
            background: var(--herbax-primary);
            color: white;
        }

        .quantity-input {
            width: 60px;
            text-align: center;
            border: 1px solid #e5e7eb;
            border-radius: 4px;
            padding: 6px;
        }

        /* Pantalla de confirmaci√≥n m√°s limpia */
        .confirmation-screen {
            display: none;
            text-align: center;
            padding: 40px;
            background: white;
            border: 1px solid #e5e7eb;
            border-radius: 12px;
        }

        .confirmation-icon {
            font-size: 4rem;
            margin-bottom: 20px;
        }

        .confirmation-title {
            font-size: 2rem;
            color: var(--herbax-primary);
            margin-bottom: 15px;
            font-weight: 600;
        }

        .confirmation-message {
            font-size: 1.1rem;
            color: #666;
            margin-bottom: 30px;
            line-height: 1.6;
        }

        .order-summary-card {
            background: #f9f9f9;
            border-radius: 8px;
            padding: 20px;
            margin: 20px 0;
            text-align: left;
            border: 1px solid #f0f0f0;
        }

        .back-to-home-btn {
            background: var(--herbax-primary);
            color: white;
            border: none;
            padding: 12px 24px;
            border-radius: 8px;
            font-size: 1rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.2s ease;
        }

        .back-to-home-btn:hover {
            background: #2d8a1f;
        }

        @media (max-width: 768px) {
            .container {
                padding: 15px;
            }
            
            .header h1 {
                font-size: 2.5rem;
            }
            
            .step-container {
                padding: 25px;
            }
            
            .button-group {
                flex-direction: column;
            }
            
            .btn {
                width: 100%;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <!-- Header simplificado como en v23 -->
        <div class="header">
            <h1 onclick="goToHome()">Herbax</h1>
            <p>Sistema de Pedidos - Formulario Sencillo</p>
        </div>

        <!-- Banner de ayuda con dise√±o lateral verde -->
        <div class="help-banner">
            <strong>¬øNecesitas ayuda?</strong><br>
            Llama al Centro de Atenci√≥n CADI: <strong>800 649 0653</strong>
        </div>

        <div class="progress-bar">
            <div class="progress-fill" id="progressFill" style="width: 20%"></div>
        </div>

        <p style="font-size: 1.1rem; color: #666; margin-bottom: 20px;">Paso 1: Selecci√≥n de Pa√≠s</p>

         Paso 1: Selecci√≥n de Pa√≠s 
        <div class="step-container active" id="step1">
            <div class="step-header">
                <div class="step-number">1</div>
                <h2 class="step-title">Selecciona tu Pa√≠s</h2>
                <p class="step-description">
                    Primero necesitamos saber desde qu√© pa√≠s nos est√°s escribiendo.<br>
                    Esto nos ayudar√° a mostrarte los productos y precios correctos.
                </p>
                <p style="font-size: 1rem; color: var(--herbax-gray); margin-top: 15px; font-weight: 600;">Sistema exclusivo para Centros de Distribuci√≥n</p>
            </div>

            <div class="country-grid">
                <div class="country-option" data-country="mexico" data-currency="MXN" data-symbol="$">
                    <div class="country-flag">üá≤üáΩ</div>
                    <div class="country-name">M√©xico</div>
                    <div class="country-currency">Precios en Pesos Mexicanos</div>
                </div>
                <div class="country-option" data-country="guatemala" data-currency="GTQ" data-symbol="Q">
                    <div class="country-flag">üá¨üáπ</div>
                    <div class="country-name">Guatemala</div>
                    <div class="country-currency">Precios en Quetzales</div>
                </div>
                <div class="country-option" data-country="usa" data-currency="USD" data-symbol="$">
                    <div class="country-flag">üá∫üá∏</div>
                    <div class="country-name">Estados Unidos</div>
                    <div class="country-currency">Precios en D√≥lares</div>
                </div>
            </div>

            <div class="button-group">
                <button class="btn btn-primary" id="nextStep1" disabled>
                    Continuar al Paso 2 ‚Üí
                </button>
            </div>
        </div>

         Paso 2: Selecci√≥n de Almac√©n 
        <div class="step-container" id="step2">
            <div class="step-header">
                <div class="step-number">2</div>
                <h2 class="step-title">Selecciona tu Centro de Distribuci√≥n</h2>
                <p class="step-description">
                    Ahora necesitamos saber a qu√© almac√©n o centro de distribuci√≥n perteneces.<br>
                    Selecciona de la lista o llena los datos manualmente.
                </p>
            </div>

             Cambiando b√∫squeda por texto a dropdown menu 
            <div class="form-group">
                <label class="form-label">Centro de Distribuci√≥n *</label>
                <select class="form-input" id="warehouseSelect" required>
                    <option value="">Selecciona tu centro de distribuci√≥n</option>
                </select>
            </div>

            <div class="form-group">
                <label class="form-label">Nombre del Almac√©n *</label>
                <input type="text" class="form-input" id="warehouseName" required>
            </div>

            <div class="form-group">
                <label class="form-label">Ciudad *</label>
                <input type="text" class="form-input" id="warehouseCity" required>
            </div>

            <div class="form-group">
                <label class="form-label">Correo del Almac√©n *</label>
                <input type="email" class="form-input" id="warehouseEmail" required>
            </div>

            <div class="form-group">
                <label class="form-label">Tel√©fono del Almac√©n *</label>
                <input type="tel" class="form-input" id="warehousePhone" required>
            </div>

            <div class="button-group">
                <button class="btn btn-secondary" id="backStep2">‚Üê Regresar</button>
                <button class="btn btn-primary" id="nextStep2">Continuar al Paso 3 ‚Üí</button>
            </div>
        </div>

         Paso 3: Informaci√≥n del Distribuidor 
        <div class="step-container" id="step3">
            <div class="step-header">
                <div class="step-number">3</div>
                <h2 class="step-title">Informaci√≥n del Distribuidor</h2>
                <p class="step-description">
                    Ahora necesitamos tus datos como distribuidor de Herbax.<br>
                    Si ya eres distribuidor, puedes buscar tu informaci√≥n para que se llene autom√°ticamente.
                </p>
            </div>

            <div class="form-group">
                <label class="form-label">Buscar mi informaci√≥n de distribuidor</label>
                <div class="search-container">
                    <input type="text" class="form-input" id="distributorSearch" 
                           placeholder="Escribe tu ID de distribuidor, nombre, tel√©fono o correo">
                    <div class="search-results" id="searchResults"></div>
                </div>
                <div class="help-text">
                    <div style="background: #fef3c7; border: 1px solid #f59e0b; border-radius: 8px; padding: 15px; margin: 15px 0;">
                        <h4 style="color: #92400e; margin-bottom: 10px; font-weight: bold;">¬øC√≥mo es mi ID de distribuidor?</h4>
                        <div style="color: #92400e; font-size: 0.9rem;">
                            <p>‚Ä¢ <strong>M√©xico:</strong> N√∫meros secuenciales (ejemplo: 66, 67, 68...)</p>
                            <p>‚Ä¢ <strong>Guatemala:</strong> Empieza con GT (ejemplo: GT002, GT003...)</p>
                            <p>‚Ä¢ <strong>Estados Unidos:</strong> Empieza con US (ejemplo: US002, US003...)</p>
                            <p style="font-size: 0.8rem; margin-top: 8px; font-style: italic;">* Los IDs que empiezan con "P" son solo para pruebas</p>
                        </div>
                    </div>
                </div>
            </div>

            <div class="form-group">
                <label class="form-label">ID de Distribuidor *</label>
                <input type="text" class="form-input" id="distributorId" required>
            </div>

            <div class="form-group">
                <label class="form-label">Nombre Completo *</label>
                <input type="text" class="form-input" id="distributorName" required>
            </div>

            <div class="form-group">
                <label class="form-label">Correo Electr√≥nico *</label>
                <input type="email" class="form-input" id="distributorEmail" required>
            </div>

            <div class="form-group">
                <label class="form-label">Confirmar Correo Electr√≥nico *</label>
                <input type="email" class="form-input" id="distributorEmailConfirm" required>
            </div>

            <div class="form-group">
                <label class="form-label">Tel√©fono *</label>
                <input type="tel" class="form-input" id="distributorPhone" required>
            </div>

             Agregando campos adicionales de direcci√≥n para n8n 
            <div class="form-group">
                <label class="form-label">Estado *</label>
                <input type="text" class="form-input" id="distributorState" required>
            </div>

            <div class="form-group">
                <label class="form-label">Ciudad *</label>
                <input type="text" class="form-input" id="distributorCity" required>
            </div>

            <div class="form-group">
                <label class="form-label">Calle y N√∫mero *</label>
                <input type="text" class="form-input" id="distributorStreet" required>
            </div>

            <div class="form-group">
                <label class="form-label">Colonia *</label>
                <input type="text" class="form-input" id="distributorColony" required>
            </div>

            <div class="form-group">
                <label class="form-label">C√≥digo Postal *</label>
                <input type="text" class="form-input" id="distributorPostalCode" required>
            </div>

            <div class="form-group">
                <label class="form-label">Pa√≠s *</label>
                <input type="text" class="form-input" id="distributorCountry" required readonly>
            </div>

            <div class="form-group">
                <label class="form-label">Persona quien recibe *</label>
                <input type="text" class="form-input" id="distributorReceiver" required>
            </div>

            <div class="button-group">
                <button class="btn btn-secondary" id="backStep3">‚Üê Regresar</button>
                <button class="btn btn-primary" id="nextStep3">Continuar al Paso 4 ‚Üí</button>
            </div>
        </div>

         Paso 4: Selecci√≥n de Productos 
        <div class="step-container" id="step4">
            <div class="step-header">
                <div class="step-number">4</div>
                <h2 class="step-title">Selecciona tus Productos</h2>
                <p class="step-description">
                    Aqu√≠ puedes elegir los productos que deseas ordenar.<br>
                    Los precios mostrados son <strong>SIN impuestos</strong>.
                </p>
            </div>

            <div class="form-group">
                <label class="form-label">Buscar productos</label>
                <input type="text" class="form-input" id="productSearch" 
                       placeholder="Busca por nombre del producto o SKU (ejemplo: RIM, 26-02, Magnotun)">
                <div class="help-text">
                    <strong>Tip:</strong> Puedes buscar por nombre del producto o por su c√≥digo SKU
                </div>
            </div>

            <div id="productList" class="product-grid">
                 Los productos se cargar√°n aqu√≠ 
            </div>

            <div class="button-group">
                <button class="btn btn-secondary" id="backStep4">‚Üê Regresar</button>
                <button class="btn btn-primary" id="nextStep4">Ver Resumen del Pedido ‚Üí</button>
            </div>
        </div>

         Paso 5: Confirmaci√≥n 
        <div class="step-container" id="step5">
            <div class="step-header">
                <div class="step-number">5</div>
                <h2 class="step-title">Confirma tu Pedido</h2>
                <p class="step-description">
                    Revisa que toda la informaci√≥n est√© correcta antes de enviar tu pedido.
                </p>
            </div>

            <div id="orderSummary">
                 El resumen se cargar√° aqu√≠ 
            </div>

            <div class="form-group">
                <label class="form-label">M√©todo de Pago *</label>
                <select class="form-input" id="paymentMethod" required>
                    <option value="">Selecciona un m√©todo de pago</option>
                    <!-- Opciones de pago se actualizar√°n din√°micamente seg√∫n el pa√≠s -->
                </select>
            </div>

            <div class="button-group">
                <button class="btn btn-secondary" id="backStep5">‚Üê Regresar</button>
                <button class="btn btn-primary" id="submitOrder" disabled>Enviar Pedido</button>
            </div>
        </div>

         Pantalla de confirmaci√≥n 
        <div id="confirmationScreen" class="confirmation-screen">
            <div class="confirmation-icon">‚úÖ</div>
            <div class="confirmation-title">¬°Pedido Enviado Exitosamente!</div>
            <div class="confirmation-message">
                Tu pedido ha sido enviado correctamente y ser√° procesado por nuestro equipo.<br>
                Recibir√°s una confirmaci√≥n por correo electr√≥nico en breve.
            </div>
            
            <div class="order-summary-card">
                <h3 style="color: var(--herbax-primary); margin-bottom: 15px;">üìã Resumen de tu Pedido</h3>
                <div id="finalOrderSummary"></div>
            </div>

            <button class="back-to-home-btn" onclick="goToHome()">
                üè† Regresar al Inicio
            </button>
        </div>
    </div>

    <script>
        let selectedCountry = null;
        let selectedCurrency = null;
        let selectedSymbol = null;
        let currentStep = 1;
        let cart = [];

        // Funci√≥n para mostrar pasos
        function showStep(step) {
            console.log('[v0] Showing step:', step);
            
            // Ocultar todos los pasos
            document.querySelectorAll('.step-container').forEach(container => {
                container.classList.remove('active');
            });
            
            // Mostrar el paso actual
            const stepElement = document.getElementById(`step${step}`);
            if (stepElement) {
                stepElement.classList.add('active');
                currentStep = step;
            }
        }

        // Funci√≥n para seleccionar pa√≠s
        function selectCountry(country, currency, symbol) {
            console.log('[v0] Selecting country:', country);
            
            // Remover selecci√≥n anterior
            document.querySelectorAll('.country-option').forEach(option => {
                option.classList.remove('selected');
            });
            
            // Seleccionar nuevo pa√≠s
            const selectedOption = document.querySelector(`[data-country="${country}"]`);
            if (selectedOption) {
                selectedOption.classList.add('selected');
            }
            
            selectedCountry = country;
            selectedCurrency = currency;
            selectedSymbol = symbol;
            
            // Habilitar bot√≥n siguiente
            const nextButton = document.getElementById('nextStep1');
            if (nextButton) {
                nextButton.disabled = false;
            }
            
            console.log('[v0] Country selected successfully:', selectedCountry);
        }

        // Funci√≥n para ir al siguiente paso
        function goToStep(step) {
            console.log('[v0] Going to step:', step);
            
            if (step === 2 && !selectedCountry) {
                alert('Por favor selecciona un pa√≠s primero');
                return;
            }
            
            showStep(step);
        }

        // Inicializaci√≥n cuando carga la p√°gina
        document.addEventListener('DOMContentLoaded', function() {
            console.log('[v0] DOM loaded, setting up...');
            
            // Mostrar paso 1
            showStep(1);
            
            // Configurar event listeners para selecci√≥n de pa√≠s
            const countryOptions = document.querySelectorAll('.country-option');
            console.log('[v0] Found country options:', countryOptions.length);
            
            countryOptions.forEach(option => {
                option.addEventListener('click', function() {
                    console.log('[v0] Country option clicked:', this.dataset.country);
                    selectCountry(this.dataset.country, this.dataset.currency, this.dataset.symbol);
                });
            });
            
            // Configurar bot√≥n siguiente del paso 1
            const nextStep1 = document.getElementById('nextStep1');
            if (nextStep1) {
                nextStep1.addEventListener('click', function() {
                    console.log('[v0] Next step 1 clicked');
                    goToStep(2);
                });
            }
            
            console.log('[v0] Setup complete');
        });

        let warehouseData = {
            mexico: [
                { id: '15', name: 'SALTILLO, COAHUILA 1', contact: 'IMELDA RAMIREZ', code: 'BOD 15', email: 'saltillo@herbax.com', phone: '800-649-0653' },
                { id: '481', name: 'ENSENADA, BC', contact: 'ENRIQUE A. CASTRO ALVAREZ', email: 'ensenada@herbax.com', phone: '800-649-0653' },
                { id: '130', name: 'CA-130 TAMPICO, TAMPS', contact: 'MA. ANTONIA PANAYETA', email: 'tampico@herbax.com', phone: '800-649-0653' },
                { id: '591', name: 'CDA QUERETARO, QRO', contact: 'MARIA ELENA CERVANTES', email: 'queretaro@herbax.com', phone: '800-649-0653' },
                { id: '465', name: 'CA-83 HERMOSILLO, SON', contact: 'ROSA DELIA MONTES', email: 'hermosillo@herbax.com', phone: '800-649-0653' },
                { id: '508', name: 'HERBAX LA VILLA', contact: 'JESUS PONCE', email: 'lavilla@herbax.com', phone: '800-649-0653' },
                { id: '551', name: 'HERBAX MONTERREY', contact: 'VIRIDIANA COSTILLA', email: 'monterrey@herbax.com', phone: '800-649-0653' },
                { id: '199', name: 'GUADALUPE, NL 2', contact: 'JESUS GARZA', email: 'guadalupe@herbax.com', phone: '800-649-0653' },
                { id: '531', name: 'CA-111 TEPIC, NAYARIT 4', contact: 'DARINKA MIRAMONTES', email: 'tepic@herbax.com', phone: '800-649-0653' },
                { id: '409', name: 'SAN LUIS POTOSI, SLP', contact: 'OLGA MARTINEZ CASTRO', email: 'slp@herbax.com', phone: '800-649-0653' },
                { id: '509', name: 'HERBAX ECATEPEC', contact: 'JAZMIN VILLEGAS', email: 'ecatepec@herbax.com', phone: '800-649-0653' },
                { id: '475', name: 'CA-91 SAN MARTIN MEXICAPAN, OAX', contact: 'IRENEA GARCIA V', email: 'oaxaca@herbax.com', phone: '800-649-0653' },
                { id: '306', name: 'TEPIC, NAYARIT 3', contact: 'OCTAVIO MARIN', email: 'tepic3@herbax.com', phone: '800-649-0653' },
                { id: '392', name: 'CELAYA, GUANAJUATO 3', contact: 'DANIEL FONSECA BALLESTEROS', email: 'celaya@herbax.com', phone: '800-649-0653' },
                { id: '547', name: 'URUAPAN 2, MICHOACAN', contact: 'TRINIDAD VALDOVINOS', email: 'uruapan@herbax.com', phone: '800-649-0653' },
                { id: '109', name: 'FRESNILLO, ZACATECAS', contact: 'OFELIA AGUIRRE', email: 'fresnillo@herbax.com', phone: '800-649-0653' },
                { id: '295', name: 'HERBAX TUXTLA GTZ, CHIAPAS', contact: 'JORGE MIJANGOS', email: 'tuxtla@herbax.com', phone: '800-649-0653' },
                { id: '35', name: 'TUXTLA 2, CHIAPAS', contact: 'CARLOS AVENDANO', email: 'tuxtla2@herbax.com', phone: '800-649-0653' },
                { id: '447', name: 'TIJUANA, BC 5', contact: 'OSCAR LEONARDO M. GONZALEZ', email: 'tijuana@herbax.com', phone: '800-649-0653' },
                { id: '127', name: 'TAPACHULA, CHIAPAS 1', contact: 'SARA HERNANDEZ', email: 'tapachula@herbax.com', phone: '800-649-0653' },
                { id: '588', name: 'CA-139 NUEVA ITALIA MICH', contact: 'MA GUADALUPE RODRIGUEZ', email: 'nuevaitalia@herbax.com', phone: '800-649-0653' },
                { id: '234', name: 'HERMOSILLO, SONORA 2', contact: 'RUBEN JACOB ESTRELLA', email: 'hermosillo2@herbax.com', phone: '800-649-0653' },
                { id: '420', name: 'CA-58 MONCLOVA, COAHUILA', contact: 'FRANCISCA CAMPOS', email: 'monclova@herbax.com', phone: '800-649-0653' },
                { id: '511', name: 'CA-107 TEZONTEPEC, HGO', contact: 'ALBERTA ANGELES BAUTISTA', email: 'tezontepec@herbax.com', phone: '800-649-0653' },
                { id: '597', name: 'CA TIJUANA', contact: 'KATIA GIL PUENTE', email: 'tijuana2@herbax.com', phone: '800-649-0653' },
                { id: '563', name: 'XALAPA, VERACRUZ', contact: 'MARIA OLGA GUZMAN', email: 'xalapa@herbax.com', phone: '800-649-0653' },
                { id: '494', name: 'HERBAX LEON, GUANAJUATO', contact: 'ANA', email: 'leon@herbax.com', phone: '800-649-0653' },
                { id: '345', name: 'TOLUCA, EDO DE MEXICO', contact: 'CONCEPCION ALVA CAMACHO', email: 'toluca@herbax.com', phone: '800-649-0653' },
                { id: '595', name: 'CA SAN CRISTOBAL DE LAS CHIAPAS', contact: 'JULIO AGUILAR', email: 'sancristobal@herbax.com', phone: '800-649-0653' },
                { id: '20', name: 'HERBAX CULIACAN', contact: 'SALVADOR VEGA', email: 'culiacan@herbax.com', phone: '800-649-0653' },
                { id: '535', name: 'SAN CRISTOBAL, CHIAPAS', contact: 'EDSON JAIR SOLIS HERNANDEZ', email: 'sancristobal2@herbax.com', phone: '800-649-0653' },
                { id: '386', name: 'CIUDAD OBREGON, SONORA', contact: 'NORBERTO JARA RUEDA', email: 'obregon@herbax.com', phone: '800-649-0653' }
            ],
            guatemala: [],
            usa: []
        };

        let productData = {
            mexico: [
                { id: 'difest', name: 'Difest', sku: '1', price: 292.24, priceWithTax: 339, qualifyingPoints: 42.38, commissionPoints: 36.53 },
                { id: 'vitamina-c', name: 'Vitamina C', sku: '1A', price: 223.28, priceWithTax: 259, qualifyingPoints: 32.38, commissionPoints: 27.91 },
                { id: 'atri-plus', name: 'Atri Plus', sku: '2-03', price: 327.59, priceWithTax: 380, qualifyingPoints: 47.50, commissionPoints: 40.95 },
                { id: 'cobex', name: 'Cobex', sku: '3', price: 219.83, priceWithTax: 255, qualifyingPoints: 31.88, commissionPoints: 27.48 },
                { id: 'longlife', name: 'Longlife', sku: '4A', price: 292.24, priceWithTax: 339, qualifyingPoints: 42.38, commissionPoints: 36.53 },
                { id: 'dexel-plus-keto', name: 'Dexel Plus Keto', sku: '5D-09', price: 464.66, priceWithTax: 539, qualifyingPoints: 67.38, commissionPoints: 58.08 },
                { id: 'dexel-plus', name: 'Dexel Plus', sku: '5D-11', price: 412.93, priceWithTax: 479, qualifyingPoints: 59.88, commissionPoints: 51.62 },
                { id: 'debet', name: 'Debet', sku: '6', price: 219.83, priceWithTax: 255, qualifyingPoints: 31.88, commissionPoints: 27.48 },
                { id: 'indi', name: 'Indi', sku: '7', price: 223.28, priceWithTax: 259, qualifyingPoints: 32.38, commissionPoints: 27.91 },
                { id: 'brioreal-max', name: 'BrioReal Max', sku: '8A-01', price: 223.69, priceWithTax: 259, qualifyingPoints: 32.44, commissionPoints: 27.96 },
                { id: 'tesy', name: 'Tesy', sku: '9', price: 214.71, priceWithTax: 249, qualifyingPoints: 31.13, commissionPoints: 26.84 },
                { id: 'tesy-plus', name: 'Tesy Plus', sku: '9-05', price: 349.14, priceWithTax: 405, qualifyingPoints: 50.63, commissionPoints: 43.64 },
                { id: 'gatiloe-keto', name: 'Gatiloe Keto', sku: '10-04', price: 412.93, priceWithTax: 479, qualifyingPoints: 59.88, commissionPoints: 51.62 },
                { id: 'hipen', name: 'Hipen', sku: '11', price: 220.10, priceWithTax: 255, qualifyingPoints: 31.91, commissionPoints: 27.51 },
                { id: 'lasy', name: 'Lasy', sku: '12', price: 241.66, priceWithTax: 280, qualifyingPoints: 35.04, commissionPoints: 30.21 },
                { id: 'donox', name: 'Donox', sku: '13', price: 241.66, priceWithTax: 280, qualifyingPoints: 35.04, commissionPoints: 30.21 },
                { id: 'magne-forte', name: 'Magne-forte', sku: '14A-05', price: 323.28, priceWithTax: 375, qualifyingPoints: 46.88, commissionPoints: 40.41 },
                { id: 'obix-te', name: 'Obix T√©', sku: '15C-04', price: 499.14, priceWithTax: 579, qualifyingPoints: 72.38, commissionPoints: 62.39 },
                { id: 'vinagre-manzana', name: 'Vinagre de Manzana', sku: '15D', price: 318.10, priceWithTax: 369, qualifyingPoints: 46.13, commissionPoints: 39.76 },
                { id: 'sesy', name: 'Sesy', sku: '16', price: 430.17, priceWithTax: 499, qualifyingPoints: 62.38, commissionPoints: 37.64 },
                { id: 'alex', name: 'Alex', sku: '17', price: 214.66, priceWithTax: 249, qualifyingPoints: 31.13, commissionPoints: 26.83 },
                { id: 'domix', name: 'Domix', sku: '18-06', price: 237.07, priceWithTax: 275, qualifyingPoints: 34.38, commissionPoints: 29.63 },
                { id: 'femsy', name: 'Femsy', sku: '20C', price: 250.00, priceWithTax: 290, qualifyingPoints: 36.25, commissionPoints: 31.25 },
                { id: 'gip', name: 'Gip', sku: '21', price: 297.41, priceWithTax: 345, qualifyingPoints: 43.13, commissionPoints: 37.18 },
                { id: 'palax', name: 'Palax', sku: '23', price: 214.71, priceWithTax: 249, qualifyingPoints: 31.13, commissionPoints: 26.84 },
                { id: 'hivy', name: 'Hivy', sku: '25', price: 219.83, priceWithTax: 255, qualifyingPoints: 31.88, commissionPoints: 27.48 },
                { id: 'rim', name: 'Rim', sku: '26', price: 219.83, priceWithTax: 255, qualifyingPoints: 31.88, commissionPoints: 27.48 },
                { id: 'vanix-roydes', name: 'Vanix-Roydes', sku: '28', price: 241.38, priceWithTax: 280, qualifyingPoints: 35.00, commissionPoints: 30.17 },
                { id: 'aler-max', name: 'Aler-Max', sku: '30A', price: 331.90, priceWithTax: 385, qualifyingPoints: 48.13, commissionPoints: 41.49 },
                { id: 'magnotun-caps', name: 'Magnotun Caps', sku: '3105-01', price: 412.93, priceWithTax: 479, qualifyingPoints: 59.88, commissionPoints: 51.62 },
                { id: 'magnotun-7s-131a03', name: 'Magnotun 7s', sku: '131A-03', price: 628.45, priceWithTax: 729, qualifyingPoints: 91.13, commissionPoints: 78.56 },
                { id: 'magnotun-7s-131a06', name: 'Magnotun 7s', sku: '131A-06', price: 792.24, priceWithTax: 919, qualifyingPoints: 114.88, commissionPoints: 69.32 },
                { id: 'magnotun-7s-131a07', name: 'Magnotun 7s', sku: '131A-07', price: 1142.24, priceWithTax: 1325, qualifyingPoints: 165.63, commissionPoints: 99.95 },
                { id: 'magnotun-131-31', name: 'Magnotun 131', sku: '31', price: 719.83, priceWithTax: 835, qualifyingPoints: 104.38, commissionPoints: 89.98 },
                { id: 'magnotun-131-3102', name: 'Magnotun 131', sku: '31-02', price: 900.86, priceWithTax: 1045, qualifyingPoints: 130.63, commissionPoints: 78.83 },
                { id: 'magnotun-131-3103', name: 'Magnotun 131', sku: '31-03', price: 1283.62, priceWithTax: 1489, qualifyingPoints: 186.13, commissionPoints: 112.32 },
                { id: 'labrin', name: 'Labrin', sku: '33A', price: 240.52, priceWithTax: 279, qualifyingPoints: 34.88, commissionPoints: 30.06 },
                { id: 'ajo-negro', name: 'Ajo Negro', sku: '34-01', price: 292.24, priceWithTax: 339, qualifyingPoints: 42.38, commissionPoints: 36.53 },
                { id: 'cilco-life', name: 'Cilco-Life', sku: '36A-03', price: 241.38, priceWithTax: 280, qualifyingPoints: 35.00, commissionPoints: 30.17 },
                { id: 'plosan', name: 'Plosan', sku: '40-04', price: 241.38, priceWithTax: 280, qualifyingPoints: 35.00, commissionPoints: 30.17 },
                { id: 'fimax-keto', name: 'Fimax Keto', sku: '42-02', price: 357.76, priceWithTax: 415, qualifyingPoints: 51.88, commissionPoints: 44.72 },
                { id: 'redoxin', name: 'Redoxin', sku: '43', price: 439.66, priceWithTax: 510, qualifyingPoints: 63.75, commissionPoints: 54.96 },
                { id: 'ternosan', name: 'Ternosan', sku: '44', price: 306.03, priceWithTax: 355, qualifyingPoints: 44.38, commissionPoints: 38.25 },
                { id: 'visan', name: 'Visan', sku: '45', price: 219.83, priceWithTax: 255, qualifyingPoints: 31.88, commissionPoints: 27.48 },
                { id: 'cloriloe', name: 'Cloriloe', sku: '47-05', price: 357.76, priceWithTax: 415, qualifyingPoints: 51.88, commissionPoints: 44.72 },
                { id: 'lactilostro', name: 'Lactilostro', sku: '48', price: 369.83, priceWithTax: 429, qualifyingPoints: 53.63, commissionPoints: 46.23 },
                { id: 'nutravit-vainilla', name: 'Nutravit Vainilla', sku: '51E', price: 706.03, priceWithTax: 819, qualifyingPoints: 102.38, commissionPoints: 61.78 },
                { id: 'macromega-ajo', name: 'Macromega con Ajo', sku: '52A-03', price: 340.52, priceWithTax: 395, qualifyingPoints: 49.38, commissionPoints: 42.56 },
                { id: 'enerbax-coffee', name: 'Enerbax Coffee', sku: '57', price: 469.83, priceWithTax: 545, qualifyingPoints: 68.13, commissionPoints: 58.73 },
                { id: 'herbalance', name: 'Herbalance', sku: '59', price: 219.83, priceWithTax: 255, qualifyingPoints: 31.88, commissionPoints: 27.48 },
                { id: 'total-fem', name: 'Total Fem', sku: '59F', price: 297.41, priceWithTax: 345, qualifyingPoints: 43.13, commissionPoints: 37.18 },
                { id: 'total-men', name: 'Total Men', sku: '59M', price: 297.41, priceWithTax: 345, qualifyingPoints: 43.13, commissionPoints: 37.18 },
                { id: 'moringa', name: 'Moringa', sku: '66-01', price: 231.90, priceWithTax: 269, qualifyingPoints: 33.63, commissionPoints: 28.99 },
                { id: 'stevy', name: 'Stevy', sku: '60', price: 232.76, priceWithTax: 270, qualifyingPoints: 33.75, commissionPoints: 29.09 },
                { id: 'oxyvit-resveratrol', name: 'Oxyvit con Resveratrol', sku: '68B-01', price: 306.03, priceWithTax: 355, qualifyingPoints: 44.38, commissionPoints: 26.78 },
                { id: 'sabila-polvo', name: 'S√°bila polvo tarro', sku: '69-02', price: 487.07, priceWithTax: 565, qualifyingPoints: 70.63, commissionPoints: 60.88 },
                { id: 'colageno-keto', name: 'Col√°geno Hidrolizado Keto', sku: '71C-05', price: 512.93, priceWithTax: 595, qualifyingPoints: 74.38, commissionPoints: 44.88 },
                { id: 'colageno-fresa', name: 'Col√°geno Plus Fresa', sku: '71C-07', price: 412.93, priceWithTax: 479, qualifyingPoints: 59.88, commissionPoints: 51.62 },
                { id: 'gomitas-biotina', name: 'Gomitas de Biotina+√Åcido Hialur√≥nico', sku: '71E', price: 395.69, priceWithTax: 459, qualifyingPoints: 57.38, commissionPoints: 49.46 },
                { id: 'herbalitos-30', name: 'Herbalitos 30 porciones Citrus/Neutro', sku: '72 / 73', price: 369.83, priceWithTax: 429, qualifyingPoints: 53.63, commissionPoints: 32.36 },
                { id: 'herbalitos-15', name: 'Herbalitos 15 porciones Citrus /Neutro', sku: '72-01 /73-01', price: 206.03, priceWithTax: 239, qualifyingPoints: 29.88, commissionPoints: 18.03 }
            ],
            guatemala: [
                { id: 'rim', name: 'RIM', sku: '26-02', price: 133.03, qualifyingPoints: 37.25, commissionPoints: 33.26, priceWithTax: 149.00 },
                { id: 'tesy', name: 'TESY', sku: '09-03', price: 133.03, qualifyingPoints: 37.25, commissionPoints: 33.26, priceWithTax: 149.00 },
                { id: 'hivy', name: 'HIVY', sku: '25-02', price: 133.03, qualifyingPoints: 37.25, commissionPoints: 33.26, priceWithTax: 149.00 },
                { id: 'debet', name: 'DEBET', sku: '06-02', price: 133.03, qualifyingPoints: 37.25, commissionPoints: 33.26, priceWithTax: 149.00 },
                { id: 'gatiloe', name: 'GATILOE', sku: '10-03', price: 177.67, qualifyingPoints: 49.75, commissionPoints: 42.20, priceWithTax: 199.00 },
                { id: 'cilco-life', name: 'CILCO-LIFE', sku: '36A-02', price: 133.03, qualifyingPoints: 37.25, commissionPoints: 33.26, priceWithTax: 149.00 },
                { id: 'magneforte', name: 'MAGNEFORTE', sku: '14A-02', price: 150.89, qualifyingPoints: 42.25, commissionPoints: 37.72, priceWithTax: 169.00 },
                { id: 'fimax', name: 'FIMAX', sku: '42-01', price: 186.60, qualifyingPoints: 52.25, commissionPoints: 46.65, priceWithTax: 209.00 },
                { id: 'alex', name: 'ALEX', sku: '17-02', price: 150.89, qualifyingPoints: 42.25, commissionPoints: 37.72, priceWithTax: 169.00 },
                { id: 'cloriloe', name: 'CLORILOE', sku: '47-01', price: 159.82, qualifyingPoints: 44.75, commissionPoints: 39.96, priceWithTax: 179.00 },
                { id: 'difest', name: 'DIFEST', sku: '01-03', price: 168.75, qualifyingPoints: 47.25, commissionPoints: 42.19, priceWithTax: 189.00 },
                { id: 'plosan', name: 'PLOSAN', sku: '40-06', price: 141.96, qualifyingPoints: 39.75, commissionPoints: 35.49, priceWithTax: 159.00 },
                { id: 'atri', name: 'ATRI', sku: '02-02', price: 168.75, qualifyingPoints: 47.25, commissionPoints: 42.19, priceWithTax: 189.00 },
                { id: 'macromega-ajo', name: 'MACROMEGA AJO', sku: '52A-05', price: 177.67, qualifyingPoints: 49.75, commissionPoints: 44.42, priceWithTax: 199.00 },
                { id: 'femsy', name: 'FEMSY', sku: '20C-03', price: 150.89, qualifyingPoints: 42.25, commissionPoints: 37.72, priceWithTax: 169.00 },
                { id: 'nutravit-vainilla', name: 'NUTRAVIT VAINILLA', sku: '51E-02', price: 222.32, qualifyingPoints: 62.25, commissionPoints: 38.91, priceWithTax: 249.00 },
                { id: 'dexel-plus', name: 'DEXEL PLUS', sku: '5D-01', price: 177.67, qualifyingPoints: 49.75, commissionPoints: 44.42, priceWithTax: 199.00 },
                { id: 'sabila', name: 'SABILA', sku: '69-01', price: 159.82, qualifyingPoints: 44.75, commissionPoints: 39.96, priceWithTax: 179.00 },
                { id: 'cobex', name: 'COBEX', sku: '03-03', price: 124.10, qualifyingPoints: 34.75, commissionPoints: 31.03, priceWithTax: 139.00 },
                { id: 'visan', name: 'VISAN', sku: '45-02', price: 150.89, qualifyingPoints: 42.25, commissionPoints: 37.72, priceWithTax: 169.00 },
                { id: 'lactilostro', name: 'LACTILOSTRO', sku: '48-02', price: 168.75, qualifyingPoints: 47.25, commissionPoints: 42.19, priceWithTax: 189.00 },
                { id: 'magnotun', name: 'MAGNOTUN', sku: '131', price: 445.53, qualifyingPoints: 124.75, commissionPoints: 111.38, priceWithTax: 499.00 },
                { id: 'hipen', name: 'HIPEN', sku: '11-01', price: 106.25, qualifyingPoints: 29.75, commissionPoints: 26.56, priceWithTax: 119.00 },
                { id: 'brioreal-max', name: 'BRIOREAL MAX', sku: '8A-03', price: 106.25, qualifyingPoints: 29.75, commissionPoints: 26.56, priceWithTax: 119.00 },
                { id: 'herbalance', name: 'HERBALANCE', sku: '59-03', price: 124.10, qualifyingPoints: 34.75, commissionPoints: 31.03, priceWithTax: 139.00 },
                { id: 'magnotun-7s', name: 'MAGNOTUN 7S', sku: '131A-02', price: 400.89, qualifyingPoints: 112.25, commissionPoints: 100.22, priceWithTax: 449.00 },
                { id: 'domix', name: 'DOMIX', sku: '18-02', price: 106.25, qualifyingPoints: 29.75, commissionPoints: 26.56, priceWithTax: 119.00 },
                { id: 'stevy', name: 'STEVY', sku: '60-03', price: 106.25, qualifyingPoints: 29.75, commissionPoints: 26.56, priceWithTax: 119.00 },
                { id: 'aler-max', name: 'ALER MAX', sku: '30A-02', price: 168.75, qualifyingPoints: 47.25, commissionPoints: 42.19, priceWithTax: 189.00 },
                { id: 'indi', name: 'INDI', sku: '07-01', price: 106.25, qualifyingPoints: 29.75, commissionPoints: 26.56, priceWithTax: 119.00 },
                { id: 'redoxin', name: 'REDOXIN', sku: '43-04', price: 195.53, qualifyingPoints: 54.75, commissionPoints: 48.88, priceWithTax: 219.00 },
                { id: 'gip', name: 'GIP', sku: '21-01', price: 133.03, qualifyingPoints: 37.25, commissionPoints: 33.26, priceWithTax: 149.00 },
                { id: 'labrin', name: 'LABRIN', sku: '33A-01', price: 106.25, qualifyingPoints: 29.75, commissionPoints: 26.56, priceWithTax: 119.00 },
                { id: 'obix-te', name: 'OBIX TE', sku: '15C-03', price: 195.53, qualifyingPoints: 54.75, commissionPoints: 48.88, priceWithTax: 219.00 },
                { id: 'paquete-detox', name: 'PAQUETE DETOX', sku: '2073-1', price: 625.00, qualifyingPoints: 175.00, commissionPoints: 156.25, priceWithTax: 700.00 }
            ],
            usa: [
                { id: 'difest-1', name: 'DIFEST-1', sku: '01-02', price: 23.69, qualifyingPoints: 39.48, commissionPoints: 39.48, discountPrice: 18.95, discountQualifyingPoints: 31.58, discountCommissionPoints: 15.79 },
                { id: 'gatiloe-10', name: 'GATILOE-10', sku: '10A', price: 25.79, qualifyingPoints: 42.98, commissionPoints: 42.98, discountPrice: 20.63, discountQualifyingPoints: 34.38, discountCommissionPoints: 17.19 },
                { id: 'hipen-11', name: 'HIPEN-11', sku: '11-03', price: 15.49, qualifyingPoints: 25.82, commissionPoints: 25.82, discountPrice: 12.39, discountQualifyingPoints: 20.65, discountCommissionPoints: 10.33 },
                { id: 'donox-13', name: 'DONOX-13', sku: '13-02', price: 15.49, qualifyingPoints: 25.82, commissionPoints: 25.82, discountPrice: 12.39, discountQualifyingPoints: 20.65, discountCommissionPoints: 10.33 },
                { id: 'magnotun-7s-box', name: 'MagnoTun 7S Box with 30 envelopes 7g ea.', sku: '131A-01', price: 50.49, qualifyingPoints: 84.15, commissionPoints: 84.15, discountPrice: 40.39, discountQualifyingPoints: 67.32, discountCommissionPoints: 33.66 },
                { id: 'magneforte-frasco', name: 'Magneforte Frasco con 48 C√°psulas', sku: '14A-04', price: 23.69, qualifyingPoints: 39.48, commissionPoints: 39.48, discountPrice: 18.95, discountQualifyingPoints: 31.58, discountCommissionPoints: 15.79 },
                { id: 'obix-tea-powder', name: 'OBIX-TEA 15C POWDER', sku: '15C-02', price: 25.79, qualifyingPoints: 42.98, commissionPoints: 42.98, discountPrice: 20.63, discountQualifyingPoints: 34.38, discountCommissionPoints: 17.19 },
                { id: 'alex-17', name: 'ALEX-17', sku: '17-01', price: 23.69, qualifyingPoints: 39.48, commissionPoints: 39.48, discountPrice: 18.95, discountQualifyingPoints: 31.58, discountCommissionPoints: 15.79 },
                { id: 'somix-18', name: 'SOMIX-18', sku: '18-08', price: 15.49, qualifyingPoints: 25.82, commissionPoints: 25.82, discountPrice: 12.39, discountQualifyingPoints: 20.65, discountCommissionPoints: 10.33 },
                { id: 'femsy-20', name: 'FEMSY 20', sku: '20C-01', price: 23.69, qualifyingPoints: 39.48, commissionPoints: 39.48, discountPrice: 18.95, discountQualifyingPoints: 31.58, discountCommissionPoints: 15.79 },
                { id: 'gip-21', name: 'GIP-21', sku: '21-03', price: 21.69, qualifyingPoints: 36.15, commissionPoints: 36.15, discountPrice: 17.35, discountQualifyingPoints: 28.92, discountCommissionPoints: 14.46 },
                { id: 'palax-23', name: 'PALAX-23', sku: '23-02', price: 15.49, qualifyingPoints: 25.82, commissionPoints: 25.82, discountPrice: 12.39, discountQualifyingPoints: 20.65, discountCommissionPoints: 10.33 },
                { id: 'hivy-25', name: 'HIVY-25', sku: '25-01', price: 19.59, qualifyingPoints: 32.65, commissionPoints: 32.65, discountPrice: 15.67, discountQualifyingPoints: 26.12, discountCommissionPoints: 13.06 },
                { id: 'rim-26', name: 'RIM 26', sku: '26A', price: 19.59, qualifyingPoints: 32.65, commissionPoints: 32.65, discountPrice: 15.67, discountQualifyingPoints: 26.12, discountCommissionPoints: 13.06 },
                { id: 'cobex-3', name: 'COBEX-3', sku: '03-03', price: 21.69, qualifyingPoints: 36.15, commissionPoints: 36.15, discountPrice: 17.35, discountQualifyingPoints: 28.92, discountCommissionPoints: 14.46 },
                { id: 'aler-max-30', name: 'ALER MAX-30', sku: '31-01', price: 23.69, qualifyingPoints: 39.48, commissionPoints: 39.48, discountPrice: 18.95, discountQualifyingPoints: 31.58, discountCommissionPoints: 15.79 },
                { id: 'magnotun-31', name: 'MAGNOTUN-31', sku: '3105', price: 40.19, qualifyingPoints: 66.98, commissionPoints: 66.98, discountPrice: 32.15, discountQualifyingPoints: 53.58, discountCommissionPoints: 26.79 },
                { id: 'cilco-life-36', name: 'CILCO-LIFE 36', sku: '36A-01', price: 21.69, qualifyingPoints: 36.15, commissionPoints: 36.15, discountPrice: 17.35, discountQualifyingPoints: 28.92, discountCommissionPoints: 14.46 },
                { id: 'plosan-40', name: 'PLOSAN-40', sku: '40-05', price: 19.59, qualifyingPoints: 32.65, commissionPoints: 32.65, discountPrice: 15.67, discountQualifyingPoints: 26.12, discountCommissionPoints: 13.06 },
                { id: 'fimax-42a', name: 'FIMAX-42A', sku: '42A-01', price: 25.79, qualifyingPoints: 42.98, commissionPoints: 42.98, discountPrice: 20.63, discountQualifyingPoints: 34.38, discountCommissionPoints: 17.19 },
                { id: 'redoxin-43', name: 'REDOXIN-43', sku: '43A-01', price: 25.79, qualifyingPoints: 42.98, commissionPoints: 42.98, discountPrice: 20.63, discountQualifyingPoints: 34.38, discountCommissionPoints: 17.19 },
                { id: 'ternosan-44', name: 'TERNOSAN-44', sku: '44-02', price: 21.69, qualifyingPoints: 36.15, commissionPoints: 36.15, discountPrice: 17.35, discountQualifyingPoints: 28.92, discountCommissionPoints: 14.46 },
                { id: 'visan-45', name: 'VISAN-45', sku: '45-01', price: 19.59, qualifyingPoints: 32.65, commissionPoints: 32.65, discountPrice: 15.67, discountQualifyingPoints: 26.12, discountCommissionPoints: 13.06 },
                { id: 'cloriloe-47', name: 'CLORILOE-47', sku: '47-02', price: 23.69, qualifyingPoints: 39.48, commissionPoints: 39.48, discountPrice: 18.95, discountQualifyingPoints: 31.58, discountCommissionPoints: 15.79 },
                { id: 'lactilostro-48', name: 'LACTILOSTRO-48', sku: '48-01', price: 23.69, qualifyingPoints: 39.48, commissionPoints: 39.48, discountPrice: 18.95, discountQualifyingPoints: 31.58, discountCommissionPoints: 15.79 },
                { id: 'nutravit-vainilla', name: 'NUTRAVIT-50 Vainilla Actual', sku: '51-D', price: 40.19, qualifyingPoints: 66.98, commissionPoints: 46.89, discountPrice: 32.15, discountQualifyingPoints: 53.58, discountCommissionPoints: 26.79 },
                { id: 'macromega-garlic', name: 'MACROMEGA WITH GARLIC-52A', sku: '52A-04', price: 23.69, qualifyingPoints: 39.48, commissionPoints: 39.48, discountPrice: 18.95, discountQualifyingPoints: 31.58, discountCommissionPoints: 15.79 },
                { id: 'herbalance-59', name: 'HERBALANCE-59', sku: '59-02', price: 19.59, qualifyingPoints: 32.65, commissionPoints: 32.65, discountPrice: 15.67, discountQualifyingPoints: 26.12, discountCommissionPoints: 13.06 },
                { id: 'debel-6', name: 'DEBEL-6', sku: '06-01', price: 19.59, qualifyingPoints: 32.65, commissionPoints: 32.65, discountPrice: 15.67, discountQualifyingPoints: 26.12, discountCommissionPoints: 13.06 },
                { id: 'digix', name: 'DIGIX', sku: '7A', price: 15.49, qualifyingPoints: 25.82, commissionPoints: 25.82, discountPrice: 12.39, discountQualifyingPoints: 20.65, discountCommissionPoints: 10.33 },
                { id: 'brio-real-max-8', name: 'BRIO REAL MAX-8', sku: '8A-02', price: 15.49, qualifyingPoints: 25.82, commissionPoints: 25.82, discountPrice: 12.39, discountQualifyingPoints: 20.65, discountCommissionPoints: 10.33 },
                { id: 'tesy-9', name: 'TESY-9', sku: '09-02', price: 21.69, qualifyingPoints: 36.15, commissionPoints: 36.15, discountPrice: 17.35, discountQualifyingPoints: 28.92, discountCommissionPoints: 14.46 },
                { id: 'colageno-hidrolizado', name: 'Colageno Hidrolizado', sku: '71C-06', price: 35.00, qualifyingPoints: 58.33, commissionPoints: 58.33, discountPrice: 28.00, discountQualifyingPoints: 46.67, discountCommissionPoints: 23.33 },
                { id: 'dexel-keto', name: 'Dexel Keto', sku: '5D-10', price: 30.00, qualifyingPoints: 50.00, commissionPoints: 50.00, discountPrice: 24.00, discountQualifyingPoints: 40.00, discountCommissionPoints: 20.00 },
                { id: 'cafe-keto', name: 'Caf√© Keto', sku: '57-01', price: 25.00, qualifyingPoints: 41.67, commissionPoints: 41.67, discountPrice: 20.00, discountQualifyingPoints: 33.33, discountCommissionPoints: 16.67 },
                { id: 'atri-plus', name: 'Atri Plus', sku: '02-04', price: 29.00, qualifyingPoints: 48.33, commissionPoints: 48.33, discountPrice: 23.20, discountQualifyingPoints: 38.67, discountCommissionPoints: 19.33 },
                { id: 'tesy-plus', name: 'Tesy Plus', sku: '9-06', price: 35.50, qualifyingPoints: 59.17, commissionPoints: 59.17, discountPrice: 28.40, discountQualifyingPoints: 47.33, discountCommissionPoints: 23.67 }
            ]
        };

        function populateWarehouseDropdown() {
            const warehouseSelect = document.getElementById('warehouseSelect');
            const countryWarehouses = warehouseData[selectedCountry] || [];
            
            warehouseSelect.innerHTML = '<option value="">Selecciona tu centro de distribuci√≥n</option>';
            
            countryWarehouses.forEach(warehouse => {
                const option = document.createElement('option');
                option.value = warehouse.id;
                option.textContent = `${warehouse.id} - ${warehouse.name}`;
                option.dataset.name = warehouse.name;
                option.dataset.city = warehouse.city;
                option.dataset.email = warehouse.email;
                option.dataset.phone = warehouse.phone;
                warehouseSelect.appendChild(option);
            });
        }

        function setupWarehouseDropdown() {
            const warehouseSelect = document.getElementById('warehouseSelect');
            warehouseSelect.addEventListener('change', function() {
                const selectedOption = this.options[this.selectedIndex];
                if (selectedOption.value) {
                    document.getElementById('warehouseName').value = selectedOption.dataset.name || '';
                    document.getElementById('warehouseCity').value = selectedOption.dataset.city || '';
                    document.getElementById('warehouseEmail').value = selectedOption.dataset.email || '';
                    document.getElementById('warehousePhone').value = selectedOption.dataset.phone || '';
                }
            });
        }

        function selectCountry(country) {
            selectedCountry = country;
            
            const countryNames = {
                'mexico': 'M√©xico',
                'guatemala': 'Guatemala', 
                'usa': 'Estados Unidos'
            };
            
            document.getElementById('distributorCountry').value = countryNames[country] || '';
            
            // Update visual selection
            document.querySelectorAll('.country-option').forEach(option => {
                option.classList.remove('selected');
            });
            document.querySelector(`[data-country="${country}"]`).classList.add('selected');
            
            // Enable next button
            document.getElementById('nextStep1').disabled = false;
            
            populateWarehouseDropdown();
        }

        function initializeEventListeners() {
            // Country selection
            document.querySelectorAll('.country-option').forEach(option => {
                option.addEventListener('click', function() {
                    const country = this.dataset.country;
                    selectCountry(country);
                });
            });

            setupWarehouseDropdown();

            // Botones de navegaci√≥n
            document.getElementById('nextStep1').addEventListener('click', () => goToStep(2));
            document.getElementById('nextStep2').addEventListener('click', () => goToStep(3));
            document.getElementById('nextStep3').addEventListener('click', () => goToStep(4));
            document.getElementById('nextStep4').addEventListener('click', () => goToStep(5));

            document.getElementById('backStep2').addEventListener('click', () => goToStep(1));
            document.getElementById('backStep3').addEventListener('click', () => goToStep(2));
            document.getElementById('backStep4').addEventListener('click', () => goToStep(3));
            document.getElementById('backStep5').addEventListener('click', () => goToStep(4));

            // B√∫squedas
            document.getElementById('distributorSearch').addEventListener('input', searchDistributor);
            document.getElementById('productSearch').addEventListener('input', searchProducts);

            // M√©todo de pago y env√≠o
            document.getElementById('paymentMethod').addEventListener('change', updateSubmitButton);
            document.getElementById('submitOrder').addEventListener('click', submitOrder);
        }

        function goToStep(step) {
            // Validar paso actual antes de continuar
            if (!validateCurrentStep()) {
                return;
            }

            // Ocultar todos los pasos
            document.querySelectorAll('.step-container').forEach(container => {
                container.classList.remove('active');
            });
            
            // Mostrar paso actual
            document.getElementById(`step${step}`).classList.add('active');
            currentStep = step;
            
            // Actualizar barra de progreso
            const progress = (step / 5) * 100;
            document.getElementById('progressFill').style.width = `${progress}%`;
            
            // Cargar contenido espec√≠fico del paso
            if (step === 2) {
                populateWarehouseDropdown();
            } else if (step === 4) {
                loadProducts();
            } else if (step === 5) {
                    updateConfirmationSummary();
                    updateSubmitButton();
            }
        }

        function validateCurrentStep() {
            if (currentStep === 1) {
                if (!selectedCountry) {
                    alert('Por favor selecciona un pa√≠s antes de continuar.');
                    return false;
                }
                return true;
            }
            
            if (currentStep === 2) {
                const warehouseSelect = document.getElementById('warehouseSelect').value;
                const warehouseName = document.getElementById('warehouseName').value;
                const warehouseCity = document.getElementById('warehouseCity').value;
                const warehouseEmail = document.getElementById('warehouseEmail').value;
                const warehousePhone = document.getElementById('warehousePhone').value;
                
                if (!warehouseSelect || !warehouseName || !warehouseCity || !warehouseEmail || !warehousePhone) {
                    alert('Por favor completa todos los campos del almac√©n.');
                    return false;
                }
                return true;
            }
            
            if (currentStep === 3) {
                const distributorId = document.getElementById('distributorId').value;
                const distributorName = document.getElementById('distributorName').value;
                const distributorEmail = document.getElementById('distributorEmail').value;
                const distributorEmailConfirm = document.getElementById('distributorEmailConfirm').value;
                const distributorPhone = document.getElementById('distributorPhone').value;
                const distributorState = document.getElementById('distributorState').value;
                const distributorCity = document.getElementById('distributorCity').value;
                const distributorStreet = document.getElementById('distributorStreet').value;
                const distributorColony = document.getElementById('distributorColony').value;
                const distributorPostalCode = document.getElementById('distributorPostalCode').value;
                const distributorCountry = document.getElementById('distributorCountry').value;
                const distributorReceiver = document.getElementById('distributorReceiver').value;
                
                if (!distributorId || !distributorName || !distributorEmail || !distributorEmailConfirm || !distributorPhone || !distributorState || !distributorCity || !distributorStreet || !distributorColony || !distributorPostalCode || !distributorCountry || !distributorReceiver) {
                    alert('Por favor completa todos los campos del distribuidor.');
                    return false;
                }
                
                if (distributorEmail !== distributorEmailConfirm) {
                    alert('Los correos electr√≥nicos no coinciden.');
                    return false;
                }
                return true;
            }
            
            if (currentStep === 4) {
                if (cart.length === 0) {
                    alert('Por favor selecciona al menos un producto.');
                    return false;
                }
                return true;
            }
            
            return true;
        }

        function searchDistributor() {
            const query = document.getElementById('distributorSearch').value.toLowerCase();
            const results = document.getElementById('searchResults');
            
            if (query.length < 2) {
                results.style.display = 'none';
                return;
            }
            
            const distributors = sampleDistributors[selectedCountry] || [];
            const filtered = distributors.filter(distributor => 
                distributor.id.toLowerCase().includes(query) ||
                distributor.name.toLowerCase().includes(query) ||
                distributor.email.toLowerCase().includes(query) ||
                distributor.phone.includes(query)
            );
            
            if (filtered.length > 0) {
                results.innerHTML = filtered.map(distributor => 
                    `<div class="search-result" onclick="selectDistributor('${distributor.id}')">
                        <strong>${distributor.id} - ${distributor.name}</strong><br>
                        ${distributor.email} | ${distributor.phone}
                    </div>`
                ).join('');
                results.style.display = 'block';
            } else {
                results.style.display = 'none';
            }
        }

        function selectDistributor(distributorId) {
            const distributors = sampleDistributors[selectedCountry] || [];
            const distributor = distributors.find(d => d.id === distributorId);
            
            if (distributor) {
                document.getElementById('distributorId').value = distributor.id;
                document.getElementById('distributorName').value = distributor.name;
                document.getElementById('distributorEmail').value = distributor.email;
                document.getElementById('distributorEmailConfirm').value = distributor.email;
                document.getElementById('distributorPhone').value = distributor.phone;
                document.getElementById('distributorState').value = '';
                document.getElementById('distributorCity').value = '';
                document.getElementById('distributorStreet').value = '';
                document.getElementById('distributorColony').value = '';
                document.getElementById('distributorPostalCode').value = '';
                document.getElementById('distributorCountry').value = distributor.country;
                document.getElementById('distributorReceiver').value = '';
                document.getElementById('searchResults').style.display = 'none';
            }
        }

        function loadProducts() {
            const products = productData[selectedCountry] || [];
            const productList = document.getElementById('productList');
            
            productList.innerHTML = products.map(product => 
                `<div class="product-card">
                    <div class="product-name">${product.name}</div>
                    <div class="product-sku">SKU: ${product.sku}</div>
                    <div class="product-price">${selectedSymbol}${product.price.toFixed(2)} (SIN IVA)</div>
                    <div class="quantity-controls">
                        <button class="quantity-btn" onclick="updateQuantity('${product.sku}', -1)">-</button>
                        <input type="number" class="quantity-input" id="qty-${product.sku}" value="0" min="0" onchange="updateQuantity('${product.sku}', 0)">
                        <button class="quantity-btn" onclick="updateQuantity('${product.sku}', 1)">+</button>
                    </div>
                </div>`
            ).join('');
        }

        function searchProducts() {
            const query = document.getElementById('productSearch').value.toLowerCase();
            const products = productData[selectedCountry] || [];
            
            if (query.length === 0) {
                loadProducts();
                return;
            }
            
            const filtered = products.filter(product => 
                product.name.toLowerCase().includes(query) || 
                product.sku.toLowerCase().includes(query)
            );
            
            const productList = document.getElementById('productList');
            productList.innerHTML = filtered.map(product => 
                `<div class="product-card">
                    <div class="product-name">${product.name}</div>
                    <div class="product-sku">SKU: ${product.sku}</div>
                    <div class="product-price">${selectedSymbol}${product.price.toFixed(2)} (SIN IVA)</div>
                    <div class="quantity-controls">
                        <button class="quantity-btn" onclick="updateQuantity('${product.sku}', -1)">-</button>
                        <input type="number" class="quantity-input" id="qty-${product.sku}" value="0" min="0" onchange="updateQuantity('${product.sku}', 0)">
                        <button class="quantity-btn" onclick="updateQuantity('${product.sku}', 1)">+</button>
                    </div>
                </div>`
            ).join('');
        }

        function updateQuantity(sku, change) {
            const input = document.getElementById(`qty-${sku}`);
            let currentValue = parseInt(input.value) || 0;
            
            if (change === 0) {
                currentValue = parseInt(input.value) || 0;
            } else {
                currentValue = Math.max(0, currentValue + change);
            }
            
            input.value = currentValue;
            
            // Actualizar carrito
            const products = productData[selectedCountry] || [];
            const product = products.find(p => p.sku === sku);
            
            if (product) {
                const existingItem = cart.find(item => item.sku === sku);
                
                if (currentValue === 0) {
                    cart = cart.filter(item => item.sku !== sku);
                } else if (existingItem) {
                    existingItem.quantity = currentValue;
                } else {
                    cart.push({
                        sku: product.sku,
                        name: product.name,
                        price: product.price,
                        quantity: currentValue,
                        qualifyingPoints: product.qualifyingPoints,
                        commissionPoints: product.commissionPoints,
                        discountPrice: product.discountPrice || product.price,
                        discountQualifyingPoints: product.discountQualifyingPoints || product.qualifyingPoints,
                        discountCommissionPoints: product.discountCommissionPoints || product.commissionPoints
                    });
                }
            }
            
            if (currentStep === 5) {
                updateConfirmationSummary();
            }
        }

        function updateConfirmationSummary() {
            const country = selectedCountry;
            const warehouseName = document.getElementById('warehouseName').value;
            const distributorName = document.getElementById('distributorName').value;
            
            const paymentMethodSelect = document.getElementById('paymentMethod');
            paymentMethodSelect.innerHTML = '<option value="">Selecciona un m√©todo de pago</option>';
            
            if (country === 'mexico') {
                paymentMethodSelect.innerHTML += '<option value="tarjeta">Pago con Tarjeta</option>';
                paymentMethodSelect.innerHTML += '<option value="deposito">Dep√≥sito Bancario</option>';
                paymentMethodSelect.disabled = false;
            } else if (country === 'guatemala') {
                paymentMethodSelect.innerHTML += '<option value="tarjeta">Pago con Tarjeta</option>';
                paymentMethodSelect.innerHTML += '<option value="deposito">Dep√≥sito Bancario</option>';
                paymentMethodSelect.innerHTML += '<option value="efectivo">Pago en Efectivo</option>';
                paymentMethodSelect.disabled = false;
            } else if (country === 'usa') {
                paymentMethodSelect.innerHTML += '<option value="tarjeta">Pago con Tarjeta</option>';
                paymentMethodSelect.value = 'tarjeta';
                paymentMethodSelect.disabled = true;
            }
            
            // Calcular totales
            let subtotal = 0;
            let totalQualifyingPoints = 0;
            let totalCommissionPoints = 0;
            
            let initialSubtotal = 0;
            cart.forEach(item => {
                initialSubtotal += item.price * item.quantity;
            });
            
            const applyDiscount = (country === 'usa' && initialSubtotal >= 1000);
            
            cart.forEach(item => {
                const currentPrice = applyDiscount ? item.discountPrice : item.price;
                const currentQualifyingPoints = applyDiscount ? item.discountQualifyingPoints : item.qualifyingPoints;
                const currentCommissionPoints = applyDiscount ? item.discountCommissionPoints : item.commissionPoints;
                
                subtotal += currentPrice * item.quantity;
                totalQualifyingPoints += currentQualifyingPoints * item.quantity;
                totalCommissionPoints += currentCommissionPoints * item.quantity;
            });

            // Calcular IVA seg√∫n pa√≠s
            let taxRate = 0;
            let taxName = '';
            if (country === 'mexico') {
                taxRate = 0.16;
                taxName = 'IVA (16%)';
            } else if (country === 'guatemala') {
                taxRate = 0.12;
                taxName = 'IVA (12%)';
            }
            
            const taxAmount = subtotal * taxRate;
            const total = subtotal + taxAmount;
            
            // Generar resumen
            let summaryHTML = `
                <div class="order-summary-card">
                    <h3 style="color: var(--herbax-primary); margin-bottom: 20px;">Resumen del Pedido</h3>
            `;
            
            if (applyDiscount) {
                summaryHTML += `
                    <div style="background-color: #d4edda; border: 1px solid #c3e6cb; color: #155724; padding: 10px; border-radius: 5px; margin-bottom: 15px;">
                        <strong>¬°Descuento Aplicado!</strong><br>
                        Compra mayor a $1,000 USD - Precios especiales activados
                    </div>
                `;
            }
            
            summaryHTML += `<h4>Productos:</h4>`;
            
            cart.forEach(item => {
                const displayPrice = applyDiscount ? item.discountPrice : item.price;
                const lineTotal = displayPrice * item.quantity;
                
                summaryHTML += `
                    <div style="margin-bottom: 10px; padding-bottom: 10px; border-bottom: 1px solid #eee;">
                        <strong>${item.name} (SKU: ${item.sku})</strong><br>
                        Cantidad: ${item.quantity} √ó ${selectedSymbol}${displayPrice.toFixed(2)} = ${selectedSymbol}${lineTotal.toFixed(2)}
                `;
                
                if (applyDiscount) {
                    const originalTotal = item.price * item.quantity;
                    summaryHTML += `<br><small style="color: #666; text-decoration: line-through;">Precio regular: ${selectedSymbol}${originalTotal.toFixed(2)}</small>`;
                }
                
                summaryHTML += `</div>`;
            });

            summaryHTML += `
                    <div style="border-top: 2px solid var(--herbax-primary); padding-top: 15px; margin-top: 15px;">
                        <p><strong>Subtotal (SIN IVA): ${selectedSymbol}${subtotal.toFixed(2)}</strong></p>
            `;
            
            if (taxRate > 0) {
                summaryHTML += `
                        <p><strong>${taxName}: ${selectedSymbol}${taxAmount.toFixed(2)}</strong></p>
                `;
            }
            
            if (country === 'usa' || country === 'guatemala') {
                summaryHTML += `
                        <div style="margin: 15px 0; padding: 10px; background-color: #f8f9fa; border-radius: 5px;">
                            <label for="shippingCost" style="display: block; margin-bottom: 5px; font-weight: bold;">Costo de Env√≠o:</label>
                            <input type="number" id="shippingCost" step="0.01" min="0" placeholder="0.00" 
                                   style="width: 100%; padding: 8px; border: 1px solid #ddd; border-radius: 4px;"
                                   onchange="updateTotalWithShipping()">
                        </div>
                `;
            }
            
            if (taxRate > 0) {
                summaryHTML += `
                        <p style="font-size: 1.2rem; color: var(--herbax-primary);"><strong id="finalTotal">Total con IVA: ${selectedSymbol}${total.toFixed(2)}</strong></p>
                `;
            } else {
                summaryHTML += `
                        <p style="font-size: 1.2rem; color: var(--herbax-primary);"><strong id="finalTotal">Total: ${selectedSymbol}${subtotal.toFixed(2)} (SIN IVA)</strong></p>
                `;
            }
            
            summaryHTML += `
                        <p><strong>Puntos Calificables:</strong> ${totalQualifyingPoints.toFixed(2)}</p>
                        <p><strong>Puntos Comisionables:</strong> ${totalCommissionPoints.toFixed(2)}</p>
                    </div>
                </div>
            `;
            
            document.getElementById('orderSummary').innerHTML = summaryHTML;
            
            // Guardar totales para el env√≠o
            window.orderTotals = {
                subtotal: subtotal,
                taxAmount: taxAmount,
                total: total,
                totalQualifyingPoints: totalQualifyingPoints,
                totalCommissionPoints: totalCommissionPoints
            };
        }
        
        function updateTotalWithShipping() {
            const shippingCost = parseFloat(document.getElementById('shippingCost').value) || 0;
            const country = selectedCountry;
            const totals = window.orderTotals;
            
            let finalTotal = totals.total + shippingCost;
            let currency = selectedSymbol;
            
            const finalTotalElement = document.getElementById('finalTotal');
            if (totals.taxAmount > 0) {
                finalTotalElement.innerHTML = `Total con IVA + Env√≠o: ${currency}${finalTotal.toFixed(2)}`;
            } else {
                finalTotalElement.innerHTML = `Total + Env√≠o: ${currency}${finalTotal.toFixed(2)} (SIN IVA)`;
            }
        }

        function updateSubmitButton() {
            const paymentMethod = document.getElementById('paymentMethod').value;
            const submitButton = document.getElementById('submitOrder');
            
            if (selectedCountry === 'usa' || paymentMethod) {
                submitButton.disabled = false;
                submitButton.style.background = 'var(--herbax-primary)';
                submitButton.style.cursor = 'pointer';
            } else {
                submitButton.disabled = true;
                submitButton.style.background = '#ccc';
                submitButton.style.cursor = 'not-allowed';
            }
        }

        function submitOrder() {
            const paymentMethod = document.getElementById('paymentMethod').value;
            if (selectedCountry !== 'usa' && !paymentMethod) {
                alert('Por favor selecciona un m√©todo de pago.');
                return;
            }
            
            // Recopilar todos los datos del pedido
            const orderData = {
                country: selectedCountry,
                currency: selectedCurrency,
                warehouse: {
                    name: document.getElementById('warehouseName').value,
                    city: document.getElementById('warehouseCity').value,
                    email: document.getElementById('warehouseEmail').value,
                    phone: document.getElementById('warehousePhone').value
                },
                distributor: {
                    id: document.getElementById('distributorId').value,
                    name: document.getElementById('distributorName').value,
                    email: document.getElementById('distributorEmail').value,
                    phone: document.getElementById('distributorPhone').value,
                    state: document.getElementById('distributorState').value,
                    city: document.getElementById('distributorCity').value,
                    street: document.getElementById('distributorStreet').value,
                    colony: document.getElementById('distributorColony').value,
                    postalCode: document.getElementById('distributorPostalCode').value,
                    country: document.getElementById('distributorCountry').value,
                    receiver: document.getElementById('distributorReceiver').value
                },
                products: cart,
                paymentMethod: paymentMethod,
                timestamp: new Date().toISOString()
            };
            
            // Enviar al webhook
            fetch('https://arkamiadorno.app.n8n.cloud/webhook/pedidos-hbx', {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json',
                },
                body: JSON.stringify(orderData)
            })
            .then(response => {
                if (response.ok) {
                    showConfirmationScreen();
                } else {
                    throw new Error('Error en el env√≠o');
                }
            })
            .catch(error => {
                console.error('Error:', error);
                alert('Hubo un error al enviar el pedido. Por favor intenta de nuevo.');
            });
        }

        function showConfirmationScreen() {
            // Ocultar formulario y mostrar confirmaci√≥n
            document.querySelectorAll('.step-container').forEach(container => {
                container.style.display = 'none';
            });
            
            // Copiar resumen al screen de confirmaci√≥n
            document.getElementById('finalOrderSummary').innerHTML = document.getElementById('orderSummary').innerHTML;
            
            document.getElementById('confirmationScreen').style.display = 'block';
        }

        function goToHome() {
            // Resetear todo el formulario
            currentStep = 1;
            selectedCountry = null;
            selectedCurrency = 'MXN';
            selectedSymbol = '$';
            cart = [];
            
            // Limpiar formularios
            document.querySelectorAll('input').forEach(input => input.value = '');
            document.querySelectorAll('select').forEach(select => select.selectedIndex = 0);
            document.querySelectorAll('.country-option').forEach(option => option.classList.remove('selected'));
            
            // Ocultar confirmaci√≥n y mostrar paso 1
            document.getElementById('confirmationScreen').style.display = 'none';
            showStep(1);
            
            // Asegurar que la barra de progreso se resetee
            updateProgressBar();
        }

        function showStep(step) {
            // Ocultar todos los pasos
            document.querySelectorAll('.step-container').forEach(container => {
                container.classList.remove('active');
            });
            
            // Mostrar paso actual
            document.getElementById(`step${step}`).classList.add('active');
            currentStep = step;
            
            // Actualizar barra de progreso
            const progress = (step / 5) * 100;
            document.getElementById('progressFill').style.width = `${progress}%`;
        }

        function updateProgressBar() {
            const progress = (currentStep / 5) * 100;
            document.getElementById('progressFill').style.width = `${progress}%`;
        }
    </script>
</body>
</html>
